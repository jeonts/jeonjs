Testing case1...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "//": "Some of the built-in JavaScript types that get encoded"
          },
          {
            "@@": {
              "item": {
                "foo": 1
              }
            }
          },
          {
            "return": {
              "date": {
                "new": [
                  "@Date",
                  "2025-01-01T00:00:00.000Z"
                ]
              },
              "regexp2": {
                "/ /": {
                  "pattern": "hello world",
                  "flags": ""
                }
              },
              "regexp": {
                "/ /": {
                  "pattern": "hello world",
                  "flags": "gi"
                }
              },
              "error": {
                "new": [
                  "@Error",
                  "Something went wrong",
                  {
                    "cause": 404
                  }
                ]
              },
              "url": {
                "new": [
                  "@URL",
                  "https://example.com/path?query=value"
                ]
              },
              "urlSearchParams": {
                "new": [
                  "@URLSearchParams",
                  "query=value&another=value"
                ]
              },
              "bigint": "1234567890123456789n",
              "symbol": {
                "()": [
                  {
                    ".": [
                      "@Symbol",
                      "for"
                    ]
                  },
                  "test"
                ]
              },
              "undefined": "@undefined",
              "specialNumbers": [
                "@Infinity",
                {
                  "-": "@Infinity"
                },
                {
                  "-": 0
                },
                "@NaN"
              ],
              "someData": {
                "new": [
                  "@Uint8Array",
                  [
                    1,
                    2,
                    3,
                    4,
                    5
                  ]
                ]
              },
              "set": {
                "new": [
                  "@Set",
                  [
                    1,
                    2,
                    3
                  ]
                ]
              },
              "map": {
                "new": [
                  "@Map",
                  [
                    [
                      1,
                      1
                    ],
                    [
                      2,
                      2
                    ]
                  ]
                ]
              },
              "sameRefs": [
                "@item",
                "@item",
                "@item"
              ],
              "sparsedArray": [
                0,
                "@undefined",
                "@undefined",
                "@@undefined",
                0
              ]
            }
          }
        ]
      },
      []
    ]
  }
}
Γ£à case1 executed without errors
---
Testing case2...
Generated JEON:
{
  "function a(name)": [
    {
      "return": {
        "(": {
          "+": [
            "Hello, ",
            "@name"
          ]
        }
      }
    }
  ]
}
Γ£à Eval result matches for case2
Result: undefined
---
Testing case3...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "function a(name)": [
              {
                "return": {
                  "(": {
                    "+": [
                      "Hello, ",
                      "@name"
                    ]
                  }
                }
              }
            ]
          },
          {
            "return": {
              "()": [
                "@a",
                "world"
              ]
            }
          }
        ]
      },
      []
    ]
  }
}
Γ£à Eval result matches for case3
Result: "Hello, world"
---
Testing case2_1...
Generated JEON:
{
  "(": {
    "function(name)": [
      {
        "return": {
          "(": {
            "+": [
              "Hello, ",
              "@name"
            ]
          }
        }
      }
    ]
  }
}
Γ¥î Eval result mismatch for case2_1
Expected result: undefined
Actual result: undefined
---
Testing case4...
Generated JEON:
[
  {
    "@": {
      "count": 0
    }
  },
  {
    "@": {
      "message": "Hello World"
    }
  }
]
Γ£à Eval result matches for case4
Result: undefined
---
Testing case5...
Generated JEON:
{
  "(x) =>": {
    "return": {
      "(": {
        "*": [
          "@x",
          2
        ]
      }
    }
  }
}
Γ¥î Eval result mismatch for case5
Expected result: undefined
Actual result: undefined
---
Testing case6...
Generated JEON:
{
  "()": [
    {
      "(x) =>": {
        "return": {
          "(": {
            "*": [
              "@x",
              2
            ]
          }
        }
      }
    },
    10
  ]
}
Γ£à Eval result matches for case6
Result: 20
---
Testing case7...
Generated JEON:
{
  "function* countUpTo(max)": [
    {
      "yield": 1
    },
    {
      "yield": 2
    },
    {
      "return": "@max"
    }
  ]
}
Γ£à Eval result matches for case7
Result: undefined
---
Testing case8...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "function* countUpTo(max)": [
              {
                "yield": 1
              },
              {
                "yield": 2
              },
              {
                "return": "@max"
              }
            ]
          },
          {
            "return": {
              "()": [
                "@countUpTo",
                10
              ]
            }
          }
        ]
      },
      []
    ]
  }
}
Γ£à Eval result matches for case8
Result: {}
---
Testing case9...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "function* countUpTo(max)": [
              {
                "yield": 1
              },
              {
                "yield": 2
              },
              {
                "return": "@max"
              }
            ]
          },
          {
            "return": [
              {
                "...": {
                  "()": [
                    "@countUpTo",
                    10
                  ]
                }
              }
            ]
          }
        ]
      },
      []
    ]
  }
}
Γ£à Eval result matches for case9
Result: [1,2]
---
Testing case10...
Generated JEON:
{
  "@": {
    "element": {
      "<div>": {
        "className": "container",
        "children": [
          {
            "<h1>": {
              "children": [
                "Hello World"
              ]
            }
          }
        ]
      }
    }
  }
}
Γ£à Eval result matches for case10
Result: undefined
---
Testing case11...
Generated JEON:
{
  "<div>": {
    "className": "container",
    "children": [
      {
        "<h1>": {
          "children": [
            "Hello World"
          ]
        }
      }
    ]
  }
}
Γ£à Eval result matches for case11
Result: {"<div>":{"className":"container","children":[{"<h1>":{"children":["Hello World"]}}]}}
---
Testing case12...
Generated JEON:
{
  "@": {
    "a": [
      1,
      2,
      {
        "...": [
          3,
          4
        ]
      },
      5
    ]
  }
}
Γ£à Eval result matches for case12
Result: undefined
---
Testing case13...
Generated JEON:
{
  "(": [
    1,
    2,
    {
      "...": [
        3,
        4
      ]
    },
    5
  ]
}
Γ£à Eval result matches for case13
Result: [1,2,3,4,5]
---
Testing case13_1...
Generated JEON:
{
  "(": [
    1,
    2,
    [
      3,
      4
    ],
    5
  ]
}
Γ£à Eval result matches for case13_1
Result: [1,2,[3,4],5]
---
Testing case14...
Generated JEON:
{
  "(": {}
}
Γ£à Eval result matches for case14
Result: {}
---
Testing case15...
Generated JEON:
{
  "(": {
    "a": 1,
    "b": 2
  }
}
Γ£à Eval result matches for case15
Result: {"a":1,"b":2}
---
Testing case16...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "@@": {
              "a": 1
            }
          },
          {
            "@@": {
              "b": 2
            }
          },
          {
            "return": {
              "+": [
                "@a",
                "@b"
              ]
            }
          }
        ]
      },
      []
    ]
  }
}
Γ£à Eval result matches for case16
Result: 3
---
Testing case17...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "@@": {
              "a": 1
            }
          },
          {
            "@@": {
              "b": 2
            }
          },
          {
            "return": {
              "+": [
                "@a",
                "@b"
              ]
            }
          }
        ]
      },
      []
    ]
  }
}
Γ£à Eval result matches for case17
Result: 3
---
Testing case18...
Generated JEON:
[
  {
    "@@": {
      "a": 1
    }
  },
  {
    "@@": {
      "b": 2
    }
  }
]
Γ£à Eval result matches for case18
Result: undefined
---
Testing case19...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "@@": {
              "a": 1
            }
          },
          {
            "return": "@a"
          }
        ]
      },
      []
    ]
  }
}
Γ£à Eval result matches for case19
Result: 1
---
Testing case20...
Generated JEON:
{
  "(": {
    "function(a)": [
      {
        "return": "@a"
      }
    ]
  }
}
Γ¥î Eval result mismatch for case20
Expected result: undefined
Actual result: undefined
---
Testing case21...
Generated JEON:
{
  "()": [
    {
      "function(a)": [
        {
          "return": {
            "+": [
              "@a",
              1
            ]
          }
        }
      ]
    },
    10
  ]
}
Γ£à Eval result matches for case21
Result: 11
---
Testing case22...
Generated JEON:
{
  "class Person": {
    "constructor(name)": [
      {
        "=": [
          {
            ".": [
              "@this",
              "name"
            ]
          },
          "@name"
        ]
      }
    ],
    "greet()": [
      {
        "return": {
          "(": {
            "+": [
              "Hello, ",
              {
                ".": [
                  "@this",
                  "name"
                ]
              }
            ]
          }
        }
      }
    ]
  }
}
Γ¥î Eval result mismatch for case22
Expected result: undefined
Actual result: undefined
---
Testing case23...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "class Person": {
              "constructor(name)": [
                {
                  "=": [
                    {
                      ".": [
                        "@this",
                        "name"
                      ]
                    },
                    "@name"
                  ]
                }
              ],
              "greet()": [
                {
                  "return": {
                    "(": {
                      "+": [
                        "Hello, ",
                        {
                          ".": [
                            "@this",
                            "name"
                          ]
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          {
            "return": {
              "new": [
                "@Person",
                "Alex"
              ]
            }
          }
        ]
      },
      []
    ]
  }
}
Γ£à Eval result matches for case23
Result: {"name":"Alex"}
---
Testing case24...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "class Person": {
              "constructor(name)": [
                {
                  "=": [
                    {
                      ".": [
                        "@this",
                        "name"
                      ]
                    },
                    "@name"
                  ]
                }
              ],
              "greet()": [
                {
                  "return": {
                    "(": {
                      "+": [
                        "Hello, ",
                        {
                          ".": [
                            "@this",
                            "name"
                          ]
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          {
            "return": {
              "()": [
                {
                  ".": [
                    {
                      "new": [
                        "@Person",
                        "Alex"
                      ]
                    },
                    "greet"
                  ]
                }
              ]
            }
          }
        ]
      },
      []
    ]
  }
}
Γ¥î Eval result mismatch for case24
Expected result: "Hello, Alex"
Actual result: "Hello, undefined"
---
Testing case25...
Generated JEON:
{
  "new": [
    {
      "class": {
        "constructor(name)": [
          {
            "=": [
              {
                ".": [
                  "@this",
                  "name"
                ]
              },
              "@name"
            ]
          }
        ],
        "greet()": [
          {
            "return": {
              "(": {
                "+": [
                  "Hello, ",
                  {
                    ".": [
                      "@this",
                      "name"
                    ]
                  }
                ]
              }
            }
          }
        ]
      }
    },
    "Ali"
  ]
}
Γ£à Eval result matches for case25
Result: {"name":"Ali"}
---
Testing case26...
Generated JEON:
{
  "()": [
    {
      ".": [
        {
          "new": [
            {
              "class": {
                "constructor(name)": [
                  {
                    "=": [
                      {
                        ".": [
                          "@this",
                          "name"
                        ]
                      },
                      "@name"
                    ]
                  }
                ],
                "greet()": [
                  {
                    "return": {
                      "(": {
                        "+": [
                          "Hello, ",
                          {
                            ".": [
                              "@this",
                              "name"
                            ]
                          }
                        ]
                      }
                    }
                  }
                ]
              }
            },
            "Mary"
          ]
        },
        "greet"
      ]
    }
  ]
}
Γ¥î Eval result mismatch for case26
Expected result: "Hello, Mary"
Actual result: "Hello, undefined"
---
Testing case27...
Generated JEON:
{
  "(": {
    "class": {
      "constructor(name)": [
        {
          "=": [
            {
              ".": [
                "@this",
                "name"
              ]
            },
            "@name"
          ]
        }
      ],
      "greet()": [
        {
          "return": {
            "(": {
              "+": [
                "Hello, ",
                {
                  ".": [
                    "@this",
                    "name"
                  ]
                }
              ]
            }
          }
        }
      ]
    }
  }
}
Γ¥î Eval result mismatch for case27
Expected result: undefined
Actual result: undefined
---
Testing case28...
Generated JEON:
{
  "new": [
    {
      "class": {
        "constructor(name)": [
          {
            "=": [
              {
                ".": [
                  "@this",
                  "name"
                ]
              },
              "@name"
            ]
          }
        ],
        "greet()": [
          {
            "return": {
              "(": {
                "+": [
                  "Hello, ",
                  {
                    ".": [
                      "@this",
                      "name"
                    ]
                  }
                ]
              }
            }
          }
        ]
      }
    },
    "Danial"
  ]
}
Γ¥î Eval result mismatch for case28
Expected result: "{\"name\":\"Danial\"}"
Actual result: {"name":"Danial"}
---
Testing case29...
Generated JEON:
{
  "()": [
    {
      ".": [
        {
          "new": [
            {
              "class": {
                "constructor(name)": [
                  {
                    "=": [
                      {
                        ".": [
                          "@this",
                          "name"
                        ]
                      },
                      "@name"
                    ]
                  }
                ],
                "greet()": [
                  {
                    "return": {
                      "(": {
                        "+": [
                          "Hello, ",
                          {
                            ".": [
                              "@this",
                              "name"
                            ]
                          }
                        ]
                      }
                    }
                  }
                ]
              }
            },
            "John"
          ]
        },
        "greet"
      ]
    }
  ]
}
Γ¥î Eval result mismatch for case29
Expected result: "Hello, John"
Actual result: "Hello, undefined"
---
Testing case30...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "class Calculator": {
              "static add(a, b)": [
                {
                  "return": {
                    "+": [
                      "@a",
                      "@b"
                    ]
                  }
                }
              ],
              "static multiply(a, b)": [
                {
                  "return": {
                    "*": [
                      "@a",
                      "@b"
                    ]
                  }
                }
              ]
            }
          },
          {
            "return": {
              "+": [
                {
                  "()": [
                    {
                      ".": [
                        "@Calculator",
                        "add"
                      ]
                    },
                    1,
                    4
                  ]
                },
                {
                  "()": [
                    {
                      ".": [
                        "@Calculator",
                        "multiply"
                      ]
                    },
                    1,
                    4
                  ]
                }
              ]
            }
          }
        ]
      },
      []
    ]
  }
}
Γ¥î Eval result mismatch for case30
Expected result: 5
Actual result: 9
---
Testing case31...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "class Calculator": {
              "static add(a, b)": [
                {
                  "return": {
                    "+": [
                      "@a",
                      "@b"
                    ]
                  }
                }
              ],
              "static multiply(a, b)": [
                {
                  "return": {
                    "*": [
                      "@a",
                      "@b"
                    ]
                  }
                }
              ]
            }
          },
          {
            "@@": {
              "=": [
                [
                  "add",
                  "multiply"
                ],
                "@Calculator"
              ]
            }
          },
          {
            "return": {
              "+": [
                {
                  "()": [
                    "@add",
                    1,
                    4
                  ]
                },
                {
                  "()": [
                    "@multiply",
                    1,
                    4
                  ]
                }
              ]
            }
          }
        ]
      },
      []
    ]
  }
}
Error in case31: Cannot call non-function 'add': undefined
---
Error: Cannot call non-function 'add': undefined
    at Object.evaluateFunctionCall (D:\Developments\tslib\jeon\src\eval.jeon\functionOperators.ts:24:19)
    at evalJeon (D:\Developments\tslib\jeon\src\safeEval.ts:466:46)
    at D:\Developments\tslib\jeon\src\eval.jeon\arithmeticOperators.ts:12:25
    at Array.reduce (<anonymous>)
    at Object.evaluatePlus (D:\Developments\tslib\jeon\src\eval.jeon\arithmeticOperators.ts:11:29)
    at evalJeon (D:\Developments\tslib\jeon\src\safeEval.ts:381:46)
    at Object.evaluateReturn (D:\Developments\tslib\jeon\src\eval.jeon\controlFlowOperators.ts:39:20)
    at evalJeon (D:\Developments\tslib\jeon\src\safeEval.ts:558:46)
    at D:\Developments\tslib\jeon\src\safeEval.ts:735:40
    at Object.evaluateFunctionCall (D:\Developments\tslib\jeon\src\eval.jeon\functionOperators.ts:14:20)
Testing case32...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "@@": {
              "Calculator": {
                "add": {
                  "(a, b) =>": {
                    "return": {
                      "+": [
                        "@a",
                        "@b"
                      ]
                    }
                  }
                },
                "multiply": {
                  "(a, b) =>": {
                    "return": {
                      "*": [
                        "@a",
                        "@b"
                      ]
                    }
                  }
                }
              }
            }
          },
          {
            "@@": {
              "=": [
                [
                  "add",
                  "multiply"
                ],
                "@Calculator"
              ]
            }
          },
          {
            "return": {
              "+": [
                {
                  "()": [
                    "@add",
                    1,
                    4
                  ]
                },
                {
                  "()": [
                    "@multiply",
                    1,
                    4
                  ]
                }
              ]
            }
          }
        ]
      },
      []
    ]
  }
}
Γ¥î Eval result mismatch for case32
Expected result: 5
Actual result: 9
---
Testing case33...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "@@": {
              "Calculator": {
                "add": {
                  "(a, b) =>": {
                    "return": {
                      "+": [
                        "@a",
                        "@b"
                      ]
                    }
                  }
                },
                "multiply": {
                  "(a, b) =>": {
                    "return": {
                      "*": [
                        "@a",
                        "@b"
                      ]
                    }
                  }
                },
                "name": {
                  "function()": [
                    {
                      "return": "Cal"
                    }
                  ]
                }
              }
            }
          },
          {
            "@@": {
              "=": [
                [
                  "add",
                  "multiply",
                  "name"
                ],
                "@Calculator"
              ]
            }
          },
          {
            "return": {
              "+": [
                {
                  "+": [
                    {
                      "+": [
                        {
                          "()": [
                            "@add",
                            1,
                            4
                          ]
                        },
                        {
                          "()": [
                            "@multiply",
                            1,
                            4
                          ]
                        }
                      ]
                    },
                    " "
                  ]
                },
                "@name"
              ]
            }
          }
        ]
      },
      []
    ]
  }
}
Γ¥î Eval result mismatch for case33
Expected result: "5 Cal"
Actual result: "9 function (...args) {\n                // Create a new context with the parameters\n                const functionContext = { ...context };\n                params.forEach((param, index) => {\n                    functionContext[param] = args[index];\n                });\n                // Evaluate the function body with the new context\n                // The body is an array of statements\n                if (Array.isArray(body)) {\n                    let result;\n                    for (const stmt of body) {\n                        result = evalJeon(stmt, functionContext);\n                        // If this is a return statement, return its value immediately\n                        if (stmt && typeof stmt === 'object' && !Array.isArray(stmt) && stmt['return'] !== undefined) {\n                            return evalJeon(stmt['return'], functionContext);\n                        }\n                    }\n                    return result;\n                }\n                else {\n                    // Single statement body\n                    return evalJeon(body, functionContext);\n                }\n            }"
---
Testing case34...
Generated JEON:
{
  "(": {
    "function([RestElement])": [
      {
        "return": "@a"
      }
    ]
  }
}
Γ¥î Eval result mismatch for case34
Expected result: undefined
Actual result: undefined
---
Testing case35...
Generated JEON:
{
  "()": [
    {
      "function([RestElement])": [
        {
          "return": {
            ".": [
              "@a",
              "length"
            ]
          }
        }
      ]
    },
    [
      1,
      2,
      3,
      4,
      5
    ]
  ]
}
Γ¥î Eval result mismatch for case35
Expected result: 1
Actual result: undefined
---
Testing case36...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "function a([RestElement])": [
              {
                "return": {
                  ".": [
                    "@a",
                    "length"
                  ]
                }
              }
            ]
          },
          {
            "return": {
              "()": [
                "@a",
                [
                  1,
                  2,
                  3,
                  4,
                  5
                ]
              ]
            }
          }
        ]
      },
      []
    ]
  }
}
Γ¥î Eval result mismatch for case36
Expected result: 1
Actual result: 0
---
Testing case37...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "@@": {
              "=": [
                [
                  "a",
                  "b",
                  "...rest"
                ],
                {
                  "a": 1,
                  "b": 3
                }
              ]
            }
          },
          {
            "return": {
              "+": [
                "@a",
                "@b"
              ]
            }
          }
        ]
      },
      []
    ]
  }
}
Γ£à Eval result matches for case37
Result: 4
---
Testing case38...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "@@": {
              "=": [
                [
                  "head",
                  "a",
                  "b",
                  "...rest"
                ],
                [
                  1,
                  2,
                  3,
                  4,
                  5
                ]
              ]
            }
          },
          {
            "return": {
              "+": [
                "@a",
                "@b"
              ]
            }
          }
        ]
      },
      []
    ]
  }
}
Γ£à Eval result matches for case38
Result: 5
---
Testing case39...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "@@": {
              "=": [
                [
                  "x",
                  "y",
                  "[@nestedA, @nestedB]"
                ],
                {
                  "x": 1,
                  "y": 2,
                  "z": {
                    "nestedA": 3,
                    "nestedB": 4
                  }
                }
              ]
            }
          },
          {
            "return": {
              "+": [
                {
                  "+": [
                    {
                      "+": [
                        {
                          "+": [
                            {
                              "+": [
                                "@x",
                                "@y"
                              ]
                            },
                            " "
                          ]
                        },
                        "@nestedA"
                      ]
                    },
                    " "
                  ]
                },
                "@nestedB"
              ]
            }
          }
        ]
      },
      []
    ]
  }
}
Γ£à Eval result matches for case39
Result: "3 3 4"
---
Testing case40...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "@@": {
              "=": [
                [
                  "a",
                  null,
                  "b"
                ],
                [
                  1,
                  2,
                  3
                ]
              ]
            }
          },
          {
            "return": {
              "+": [
                "@a",
                "@b"
              ]
            }
          }
        ]
      },
      []
    ]
  }
}
Γ£à Eval result matches for case40
Result: 4
---
Testing case41...
Generated JEON:
{
  "(": {
    "()": [
      {
        "() =>": [
          {
            "@@": {
              "=": [
                [
                  "first",
                  "...rest"
                ],
                [
                  1,
                  2,
                  3,
                  4,
                  5
                ]
              ]
            }
          },
          {
            "return": {
              "+": [
                "@first",
                {
                  ".": [
                    "@rest",
                    "length"
                  ]
                }
              ]
            }
          }
        ]
      },
      []
    ]
  }
}
Γ£à Eval result matches for case41
Result: 5
---

Test Summary:
Passed: 27
Failed: 16
Total: 43
